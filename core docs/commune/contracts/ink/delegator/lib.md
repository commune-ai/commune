# Delegator Contract

The Delegator contract is a smart contract that delegates calls to either the Adder or Subber contracts to mutate a value in an Accumulator contract. 

## Features

- **Flexible Delegation:** The delegator can switch between calling the Adder and Subber contracts.
- **Smart Contract References:** The AccumulatorRef, AdderRef and SubberRef are smart contract reference types that have been automatically generated by ink!.

## Getting Started

To get started, you would need to manually deploy the Accumulator, Adder, and Subber smart contracts, receive their code hashes from the signalled events, and then provide these hashes when creating a new Delegator contract.

```plain
Delegator::new(initial_value, version, accumulator_code_hash, adder_code_hash, subber_code_hash);
```

- `initial_value` is the value to initialize the Accumulator contract with.
- `version` is the version of the contracts, used to generate a unique salt.
- `*_code_hash` are the code hashes of the respective contracts retrieved when they were deployed independently.

## Usage

- **`get()`**: Retrieve the current value in the Accumulator contract.
```plain
delegator.get();
```
- **`change(by: i32)`**: Delegate call to either Adder or Subber contract based on the current state of the delegator. If the state is set to Adder, this will increment the value in the Accumulator contract by the provided value. If set to Subber, it will decrement it.
```plain
delegator.change(value);
```
- **`switch()`**:  Switch the state of the delegator from Adder to Subber or Subber to Adder.
```plain
delegator.switch();
```

## Testing
Tests can be found in the `e2e_tests` module, and can be run by enabling the "e2e-tests" feature. 

## Limitations
You must manually upload the Accumulator, Adder, and Subber contracts and then retrieve their contract hashes to be used in this contract. This contract doesn't manage out-of-gas errors or other runtime problems that could occur when delegating the calls to Adder or Subber. 

## License
As with all Substrate and ink! smart contracts, the license will depend on the preferences of the developer.
